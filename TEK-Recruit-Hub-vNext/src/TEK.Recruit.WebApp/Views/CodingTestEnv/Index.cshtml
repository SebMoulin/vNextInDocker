@using TEK.Recruit.Web.Utils
@model TEK.Recruit.Web.ViewModels.CandidateEnvironmentsViewModel

@{
    ViewBag.Title = "Candidate's coding excercises";
}

<h2>Manage existing coding test</h2>

<table class="table table-hover table-striped table-condensed">
    <thead>
        <tr>
            <th class="col-md-2">
                <label>Candidate</label>
            </th>
            <th class="col-md-2">
                <label>Customer</label>
            </th>
            <th class="col-md-2">
                <label>Language</label>
            </th>
            <th class="col-md-2 nowrap">
                <label>Position</label>
            </th>
            <th class="col-md-2 nowrap">
                <label>Last Activity At</label>
            </th>
            <th class="col-md-2" style="white-space: nowrap">
                &nbsp;
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var testEnv in Model.CandidateEnvironments)
        {
            var createdAt = testEnv.CreatedAt.HasValue ? @testEnv.CreatedAt.Value.ToShortDateString() + " - " + @testEnv.CreatedAt.Value.ToShortTimeString() : string.Empty;
            var lastActivityAt = testEnv.LastActivityAt.HasValue ? @testEnv.LastActivityAt.Value.ToShortDateString() + " - " + @testEnv.LastActivityAt.Value.ToShortTimeString() : string.Empty;

            <tr>
                <td class="col-md-2">
                    <span>@testEnv.CandidateName</span>
                </td>
                <td class="col-md-2">
                    <span>@testEnv.CustomerName</span>
                </td>
                <td class="col-md-2">
                    <span>@testEnv.DevEnv</span>
                </td>
                <td class="col-md-2">
                    <span>@testEnv.Position</span>
                </td>
                <td class="col-md-2">
                    <span>@lastActivityAt</span>
                </td>
                <td class="col-md-2 text-right" style="white-space: nowrap">
                    @Html.ActionLink("Evaluation form", "CandidateEvaluation", "CodingTestEnv", new { projectId = @testEnv.ProjectId, candidateId = @testEnv.CandidateId }, new { @class = "btn btn-xs btn-primary" })
                    @Html.ActionLink("Generate Report", "GenerateReport", "CodingTestEnv", new { customerId = @testEnv.CustomerId, customerName = @testEnv.CustomerName, projectId = @testEnv.ProjectId, candidateId = @testEnv.CandidateId }, new { @class = "btn btn-xs btn-primary" })
                    @Html.ActionLink("Remove Candiate Access", "RemoveUserAccess", "CodingTestEnv", new { projectId = @testEnv.ProjectId, candidateId = @testEnv.CandidateId }, @Html.GetRemoveUserAccessButtonStyle(@testEnv.CandidateId != null))
                    @Html.ActionLink("Delete Test", "DeleteTestEnv", "CodingTestEnv", new { projectId = @testEnv.ProjectId, candidateId = @testEnv.CandidateId }, new { onclick = "return confirm('Are you sure you want to delete this test?');", @class = "btn btn-xs btn-danger" })
                </td>
            </tr>
        }
    </tbody>
</table>